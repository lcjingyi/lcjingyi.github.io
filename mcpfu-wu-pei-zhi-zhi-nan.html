<!DOCTYPE html>
<html lang="chinese (simplified)">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Pelican" />
    <title>mcp服务配置指南 | linqixu_Blog</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/theme/css/main.css" />

    <!-- RSS Feeds -->

    <!-- Extra head content -->
</head>

<body id="index" class="homearticle">
    <div class="container">
        <!-- Header -->

        <!-- Main content -->
        <main id="content">
    <a href="/" class="back-button">返回首页</a>
    <article class="hentry">
        <header>
            <h1 class="entry-title">mcp服务配置指南</h1>
        </header>

        <footer class="post-info">
            <time class="published" datetime="2025-11-05T14:30:00+08:00">
                周三 05 十一月 2025
            </time>
            <address class="vcard author">
                By <a class="url fn" href="/author/lingqixu.html">lingqixu</a>
            </address>
            <p>In <a href="/category/ji-zhu.html">技术</a>.</p>
            <p>tags:
                <a href="/tag/python.html">Python</a>,                 <a href="/tag/bo-ke.html">博客</a>            </p>
        </footer>

        <div class="entry-content">
            <h1>MCP服务器配置指南</h1>
<p>本指南详细说明如何在不同的AI客户端中配置您的数学计算MCP服务器。</p>
<!--more-->

<h2>前置条件</h2>
<p>确保您的MCP服务器已经可以正常运行：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. 启动FastAPI服务器</span>
uvicorn<span class="w"> </span>main:app<span class="w"> </span>--reload<span class="w"> </span>--port<span class="w"> </span><span class="m">8000</span>

<span class="c1"># 2. 测试MCP服务器</span>
python<span class="w"> </span>simple_test.py
</code></pre></div>

<h2>1. Claude Desktop (推荐)</h2>
<h3>配置文件位置</h3>
<ul>
<li><strong>Windows</strong>: <code>%APPDATA%\Claude\claude_desktop_config.json</code></li>
<li><strong>macOS</strong>: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li>
<li><strong>Linux</strong>: <code>~/.config/claude/claude_desktop_config.json</code></li>
</ul>
<h3>配置内容</h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mcpServers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;math-server&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;mcp_client.py&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;cwd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Users\\34785\\Desktop\\bs&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>配置步骤</h3>
<ol>
<li>打开Claude Desktop</li>
<li>点击设置图标</li>
<li>选择"Developer"标签</li>
<li>在"Edit Config"中添加上述配置</li>
<li>重启Claude Desktop</li>
</ol>
<h3>使用方法</h3>
<p>配置完成后，您可以直接向Claude提问：
- "计算 25 + 17"
- "帮我计算 8 乘以 12"
- "用数学工具计算 100 + 200"</p>
<h2>2. Continue IDE (VS Code扩展)</h2>
<h3>安装Continue</h3>
<ol>
<li>在VS Code中安装Continue扩展</li>
<li>打开Continue设置</li>
</ol>
<h3>配置方法</h3>
<p>在VS Code设置中添加：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;continue.mcpServers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;math-server&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;mcp_client.py&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;cwd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Users\\34785\\Desktop\\bs&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>或者在<code>.continue/config.json</code>文件中：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mcpServers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;math-server&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;mcp_client.py&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;cwd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Users\\34785\\Desktop\\bs&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2>3. Cursor IDE</h2>
<h3>配置文件位置</h3>
<p>在项目根目录创建或编辑 <code>.cursorrules</code> 文件</p>
<h3>配置内容</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># MCP服务器配置</span>
<span class="n">Use</span><span class="w"> </span><span class="n">math</span><span class="w"> </span><span class="n">calculation</span><span class="w"> </span><span class="n">tools</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">MCP</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">arithmetic</span><span class="w"> </span><span class="n">operations</span><span class="o">.</span>

<span class="n">Available</span><span class="w"> </span><span class="n">tools</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">integer_addition</span><span class="p">:</span><span class="w"> </span><span class="n">Calculate</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">integers</span>
<span class="o">-</span><span class="w"> </span><span class="n">integer_multiplication</span><span class="p">:</span><span class="w"> </span><span class="n">Calculate</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">integers</span>
</code></pre></div>

<p>或者在Cursor设置中添加MCP配置：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mcp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;servers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;math-server&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;mcp_client.py&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;cwd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Users\\34785\\Desktop\\bs&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2>4. 自定义MCP客户端</h2>
<p>如果您使用的是其他支持MCP的客户端，基本配置格式如下：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mcpServers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;math-server&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;mcp_client.py&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;cwd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Users\\34785\\Desktop\\bs&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;env&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>配置参数说明</h3>
<ul>
<li><code>command</code>: 启动MCP服务器的命令</li>
<li><code>args</code>: 命令参数列表</li>
<li><code>cwd</code>: 工作目录（MCP服务器文件所在路径）</li>
<li><code>env</code>: 环境变量（可选）</li>
</ul>
<h2>5. 使用虚拟环境（推荐）</h2>
<p>为了更好的隔离和管理，建议使用Python虚拟环境：</p>
<h3>创建虚拟环境</h3>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>math-mcp-env
</code></pre></div>

<h3>激活虚拟环境</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Windows</span>
math-mcp-env<span class="se">\S</span>cripts<span class="se">\a</span>ctivate

<span class="c1"># Linux/macOS</span>
<span class="nb">source</span><span class="w"> </span>math-mcp-env/bin/activate
</code></pre></div>

<h3>安装依赖</h3>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>fastapi<span class="w"> </span>uvicorn<span class="w"> </span>requests
</code></pre></div>

<h3>配置文件更新</h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mcpServers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;math-server&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;math-mcp-env\\Scripts\\python.exe&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;mcp_client.py&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;cwd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Users\\34785\\Desktop\\bs&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2>6. 验证配置</h2>
<h3>检查MCP服务器状态</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 确保FastAPI服务器正在运行</span>
curl<span class="w"> </span>http://localhost:8000/api/add<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;a&quot;:1,&quot;b&quot;:2}&#39;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span>

<span class="c1"># 测试MCP服务器</span>
python<span class="w"> </span>simple_test.py
</code></pre></div>

<h3>常见问题排查</h3>
<h4>问题1: MCP服务器无法启动</h4>
<p><strong>解决方案</strong>:
1. 检查Python路径是否正确
2. 确保工作目录路径正确
3. 检查是否有语法错误</p>
<h4>问题2: 工具调用失败</h4>
<p><strong>解决方案</strong>:
1. 确保FastAPI服务器在8000端口运行
2. 检查网络连接
3. 查看MCP服务器日志</p>
<h4>问题3: 权限问题</h4>
<p><strong>解决方案</strong>:
1. 确保Python有执行权限
2. 检查防火墙设置
3. 使用管理员权限运行</p>
<h2>7. 高级配置</h2>
<h3>多服务器配置</h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mcpServers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;math-server&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;mcp_client.py&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;cwd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Users\\34785\\Desktop\\bs&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;other-server&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;other_mcp.py&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;cwd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\path\\to\\other&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>环境变量配置</h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mcpServers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;math-server&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;mcp_client.py&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;cwd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:\\Users\\34785\\Desktop\\bs&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;env&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;MATH_SERVER_PORT&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8000&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;DEBUG&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3>日志配置</h3>
<p>在mcpa.py中添加更详细的日志：</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></pre></div>

<h2>8. 配置完成后的使用</h2>
<p>配置完成后，您可以直接在AI客户端中使用数学计算功能：</p>
<h3>示例对话</h3>
<p><strong>用户</strong>: "帮我计算 123 + 456"
<strong>AI</strong>: <em>调用integer_addition工具</em> "123 + 456 = 579"</p>
<p><strong>用户</strong>: "15乘以8等于多少？"
<strong>AI</strong>: <em>调用integer_multiplication工具</em> "15 * 8 = 120"</p>
<h3>可用工具列表</h3>
<ul>
<li><code>integer_addition</code>: 计算两个整数的和</li>
<li><code>integer_multiplication</code>: 计算两个整数的积</li>
</ul>
<h2>9. 维护和更新</h2>
<h3>更新MCP服务器</h3>
<ol>
<li>修改mcpa.py中的代码</li>
<li>重启AI客户端或重新加载配置</li>
<li>测试新功能</li>
</ol>
<h3>添加新工具</h3>
<ol>
<li>在main.py中添加新的API接口</li>
<li>在mcpa.py中注册新工具</li>
<li>更新配置（如需要）</li>
</ol>
<h2>10. 故障排除资源</h2>
<h3>查看日志</h3>
<ul>
<li>Claude Desktop: 查看应用日志</li>
<li>Continue: 查看VS Code开发者工具控制台</li>
<li>自定义客户端: 检查stdout/stderr输出</li>
</ul>
<h3>测试命令</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 测试MCP服务器直接运行</span>
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:1,&quot;method&quot;:&quot;initialize&quot;,&quot;params&quot;:{}}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>python<span class="w"> </span>mcp_client.py

<span class="c1"># 测试API接口</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/api/add<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;a&quot;:5,&quot;b&quot;:3}&#39;</span>
</code></pre></div>

<p>配置完成后，您的数学计算MCP服务器就可以在AI客户端中正常使用了！</p>
        </div>

        <!-- Article navigation -->
    </article>
        </main>

        <!-- Sidebar removed -->

        <!-- Footer -->
        <footer id="contentinfo" class="body">
            <!-- 页脚内容已移除 -->
        </footer>
    </div>

    <!-- Scripts -->
    <script src="/theme/js/main.js"></script>
</body>
</html>